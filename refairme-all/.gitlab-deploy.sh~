#!/bin/bash

SSH_PRIVATE_KEY = "-----BEGIN RSA PRIVATE KEY-----
MIIEogIBAAKCAQEAnTpZv8TPdqMbc21ubV30Ocgbsr7GnPXkb3F46MSqeRm3c7syqzKulDd6+Aq/
fCq+JxRHRrDNt5kIGPuCbo1u/VhbTAd0lxgTDbgCdLWFbLNRkTD6FJ7Q5G4yxOn9GQSx0Vap7+WX
5FfaTCiH0GL7Fqm/DLVfpnh5DA2LgF8SPBKmKvp1ZWkDDMvo3oep1zAIHKall/4PWg7SYVRMx8rT
wALjl9CF/EKbK8jOtKia1fmodjYEMuYfeAxN6sSRR1m1cFdyWHQ+PCLdxAI+S/FRRczuLdbBDdK2
/r3mP/20hCFxlpUaPhF1lx0Icopf2IzgVlEYkA2iEL+1CTv43YHB8wIDAQABAoIBAAZn0Cw96m3c
60tik/MktsR74JUBrLnMUsgviUuCZ6eTYqP2ZnQPFom3UO02EuMOIr0Y2GaK4XavZ2MNLB0w6eqs
ZNvOGfPl6TDP5Fm443ywOYx+wFGCvuPvkWXwWn1gcZYjv7ykT/Hfmmcr54yX277qn3v3D7SKh/Pz
wVEzjlygHT+16nfbhEpcx5sfhNUQcDU64qAhGoCeP3aJEX5GjTzcGNmNPYeBmRslpxPS6nOD3cAP
swPHF91jcg+QP03yOyhbVSagWi86Tnfcc05vQRjeOhrN9f+JjMzmFZ7EBoeoJw2n40tiDGxYGm/O
pALXLi32mD/ls934TSyS2/SGqUECgYEA8Y7o1dwHlQqhqiwbDgBpEaL2TePD9ML/Ty/IgswWK7cq
4hV8KpWZCS8BBDhxjPWnZResk74MAgk5mqu93Nm4GiFwbVpipJkNm8v1Cw+yzx6HnkKu+XwC7IDJ
x7GLfWoyWoo06dXfUli8oWAZaDacoGYu1oY4I+vGi66Gj0L5xzECgYEApqDATLfJu67Wo/SqXB5f
rHzYDQMRAbAb+BebgrYXpr+ntcwmCgXoN5jM8mvqg/WTiDfapHlAjJuRvwnhCVwIqvnn1XCY57lH
uETb/2AMshTtM3BsKTlDAa0KsoOMvuXmxrgaTBck7L7/TArb/KsHWt3XpI5YS74scZBl+Rlq2mMC
gYAaFamU9nanJIfCnZKqV2cBLYzVamQNuUTiozFO1oUKYXQzB8jpvE/TSw0cDJBOfXR/GShcp+ga
DC75QdR11djokXXXiSwfxBtRGJw0fpR7gzt33pGQhVC3g0zG0KhUebRITKZcHelItiZgcsUrmMIf
HAmwxrunPV2qVcVYEQ5x8QKBgEcOznLo/ZKYINiSggP+v/Yi10/VOu9pVsQZ7St00+k8WhzhDme/
1SPAecX3126mz1+L0iXJv4k23pSFdf4zzU58fC09czd+f+NJGjhxkXhwDCefjcCWtsiELsep6d+O
0zdzU2OXixua5+xZxS6fEOfjKw711RmX5AQZ/CKagELZAoGAfxGJ8IgV6ItvVUl8H748ANW9hS5T
36XbjUTSdxrLET8p1aYRgJb5b9t6yITVD1u5YffsweDfKeZIQUFFtwS9c2Ys3GUyXsQuyCYom4d+
T3Vsp70ewCaT7PjjN4oLMnjvbraf3uU0RljiFj8SfHgLdmnC6X3YIQ4pSQLzjBF5BTk=
-----END RSA PRIVATE KEY-----"

DEPLOY_SERVER = root@ec2-18-185-73-100.eu-central-1.compute.amazonaws.com

#Get servers list
set -f
string=$DEPLOY_SERVER
array=(${string//,/ })

#Iterate servers for deploy and pull last commit
for i in "${!array[@]}"do    
      echo "Deploy project on server ${array[i]}"    
      ssh ubuntu@${array[i]} "cd /var/www && git pull origin master"
done
